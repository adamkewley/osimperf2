#!/bin/bash
set -eo pipefail

WORKSPACE=$(dirname $(realpath "$0"))
echo "Setup RajagopalContactUndamped benchmark at $WORKSPACE"

models_dir=$(realpath $WORKSPACE/../../opensim-models)
echo "Copy models from $models_dir"
cp -r $models_dir/Geometry $WORKSPACE/Geometry

echo Set fiber damping in RajagopalContact.osim
sed -i -e s/'fiber_damping>0.1<\/fiber_damping'/'fiber_damping>0.01<\/fiber_damping'/g RajagopalContact.osim
cat RajagopalContact.osim | grep fiber_damping && echo

binary=ToolPerf
results=$WORKSPACE/benchmark-result_RajagopalContactUndamped.csv
log=$WORKSPACE/log.txt

echo "Run RajagopalContactUndamped model"

$binary --model RajagopalContact.osim --out $results --run "1.5"
